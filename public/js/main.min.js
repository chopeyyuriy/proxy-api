document.addEventListener("DOMContentLoaded",(function(){Fancybox.bind("[data-fancybox]",{dragToClose:!1,autoFocus:!1,placeFocusBack:!1,closeButton:!1});function e(e){const t=e.querySelectorAll('tbody input[type="checkbox"]:checked').length,o=1===t?"user":"users",c=document.querySelector(".table-bottom"),r=document.querySelector(".table-selected__popup"),n=r.querySelector(".table-selected__info p");n.innerHTML=`${t} ${o}`,t>0?(r.classList.add("show"),c.classList.add("fix-padding"),n.style.opacity=1):(r.classList.remove("show"),c.classList.remove("fix-padding"),n.style.opacity=0)}document.querySelector(".main-filter")?.addEventListener("click",(e=>{e.target.closest("li").classList.toggle("active")})),document.querySelectorAll(".table.checkboxes").forEach((function(t){var o;(o=t).addEventListener("click",(function(t){if(t.target.closest('thead input[type="checkbox"]')){const c=t.target;o.querySelectorAll('tbody input[type="checkbox"]').forEach((function(e){e.checked=c.checked,e.closest("tr").classList.toggle("selected",c.checked)})),e(o)}})),o.addEventListener("click",(function(t){if(t.target.closest('tbody input[type="checkbox"]')){const o=t.target,c=o.closest("table"),r=c.querySelectorAll('tbody input[type="checkbox"]:checked').length>0;o.closest("tr").classList.toggle("selected",o.checked),c.querySelector('thead input[type="checkbox"]').checked=r,e(c)}})),o.addEventListener("click",(function(e){if("INPUT"===e.target.tagName){const t=e.target.closest("tr").querySelector('input[type="checkbox"]');t&&t.click()}}))}));const t=e=>{const t=document.querySelector(`[data-popup="${e}"]`);if(!t)return void console.error(`Error: popup "${e}" not defined`);const o=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",document.body.style.paddingRight=`${o}px`,t.classList.add("open")};document.body.addEventListener("click",(e=>{const o=e.target.closest("[data-popup-open]");o&&t(o.getAttribute("data-popup-open"))}));const o=(e,t=!1)=>{if(document.body.style.overflow="",document.body.style.paddingRight="",t)document.querySelectorAll("[data-popup]").forEach((e=>e.classList.remove("open")));else{const t=e.target.closest("[data-popup]");t&&t.classList.remove("open")}};function c(e,t){document.querySelectorAll(`.popup-group[data-section="${e}"]`).forEach((e=>{e.getAttribute("data-group")===t?e.classList.add("show"):e.classList.remove("show")}));document.querySelectorAll(`.popup-groups__list[data-section="${e}"] li`).forEach((e=>{e.getAttribute("data-group")===t?e.classList.add("active"):e.classList.remove("active")}))}document.querySelectorAll(".popup-close, .popup-backdrop, .popup .btn-save, .popup .btn-delete-no").forEach((e=>{e.addEventListener("click",(e=>o(e,!1)))})),document.querySelectorAll(".popup .btn-delete-yes").forEach((e=>{e.addEventListener("click",(e=>o(e,!0)))})),document.querySelectorAll(".popup-groups__list li").forEach((e=>{e.addEventListener("click",(e=>{c(e.target.closest(".popup-groups__list").getAttribute("data-section"),e.target.getAttribute("data-group"))}))})),document.querySelectorAll(".popup-groups__list").forEach((e=>{const t=e.querySelector("li");if(t){c(e.getAttribute("data-section"),t.getAttribute("data-group"))}}));const r=document.querySelector(".popup-task-add"),n=document.querySelector(".popup-task-query"),s=document.querySelector(".popup-task-query-group");r?.addEventListener("click",(function(){const e=s.cloneNode(!0);n.appendChild(e),e.querySelector(".popup-task-query-delete").addEventListener("click",(function(){e.remove()}))})),n?.addEventListener("click",(function(e){if(e.target.classList.contains("popup-task-query-delete")){const t=e.target.closest(".popup-task-query-group");t&&t.remove()}}));const l=document.querySelector(".live-query-add"),d=document.querySelector(".live-query"),u=document.querySelector(".live-query-group");l?.addEventListener("click",(function(){const e=u.cloneNode(!0);d.appendChild(e),e.querySelector(".live-query-delete").addEventListener("click",(function(){e.remove()}))})),d?.addEventListener("click",(function(e){if(e.target.classList.contains("live-query-delete")){const t=e.target.closest(".live-query-group");t&&t.remove()}}));const i=document.querySelector(".sidebar");document.querySelector(".sidebar-toggle").addEventListener("click",(()=>{i.classList.toggle("sidebar-sm")})),document.querySelectorAll(".js-select").forEach((e=>{new TomSelect(e,{plugins:["remove_button"]})}))}));